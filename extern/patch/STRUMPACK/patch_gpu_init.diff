diff --git a/src/dense/CUDAWrapper.cpp b/src/dense/CUDAWrapper.cpp
index 6236a723..532729f5 100644
--- a/src/dense/CUDAWrapper.cpp
+++ b/src/dense/CUDAWrapper.cpp
@@ -317,23 +317,23 @@ namespace strumpack {
     }
 
     void init() {
-#if defined(STRUMPACK_USE_MPI)
-      int devs;
-      gpu_check(cudaGetDeviceCount(&devs));
-      if (devs > 1) {
-        int flag, rank = 0;
-        MPI_Initialized(&flag);
-        if (flag) {
-          MPIComm c;
-          rank = c.rank();
-        }
-        gpu_check(cudaSetDevice(rank % devs));
-#pragma omp parallel
-        {
-          gpu_check(cudaSetDevice(rank % devs));
-        }
-      }
-#endif
+// #if defined(STRUMPACK_USE_MPI)
+//       int devs;
+//       gpu_check(cudaGetDeviceCount(&devs));
+//       if (devs > 1) {
+//         int flag, rank = 0;
+//         MPI_Initialized(&flag);
+//         if (flag) {
+//           MPIComm c;
+//           rank = c.rank();
+//         }
+//         gpu_check(cudaSetDevice(rank % devs));
+// #pragma omp parallel
+//         {
+//           gpu_check(cudaSetDevice(rank % devs));
+//         }
+//       }
+// #endif
       //       gpu_check(cudaFree(0));
       // #if defined(STRUMPACK_USE_MAGMA)
       //       magma_init();
diff --git a/src/dense/HIPWrapper.cpp b/src/dense/HIPWrapper.cpp
index 92910225..6ec0d82f 100644
--- a/src/dense/HIPWrapper.cpp
+++ b/src/dense/HIPWrapper.cpp
@@ -290,23 +290,23 @@ namespace strumpack {
     }
 
     void init() {
-#if defined(STRUMPACK_USE_MPI)
-      int devs;
-      gpu_check(hipGetDeviceCount(&devs));
-      if (devs > 1) {
-        int flag, rank = 0;
-        MPI_Initialized(&flag);
-        if (flag) {
-          MPIComm c;
-          rank = c.rank();
-        }
-        gpu_check(hipSetDevice(rank % devs));
-#pragma omp parallel
-        {
-          gpu_check(hipSetDevice(rank % devs));
-        }
-      }
-#endif
+// #if defined(STRUMPACK_USE_MPI)
+//       int devs;
+//       gpu_check(hipGetDeviceCount(&devs));
+//       if (devs > 1) {
+//         int flag, rank = 0;
+//         MPI_Initialized(&flag);
+//         if (flag) {
+//           MPIComm c;
+//           rank = c.rank();
+//         }
+//         gpu_check(hipSetDevice(rank % devs));
+// #pragma omp parallel
+//         {
+//           gpu_check(hipSetDevice(rank % devs));
+//         }
+//       }
+// #endif
     }
 
     void device_memset(void* dptr, int value, std::size_t count) {

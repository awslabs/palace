<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Dipole Antenna and Radiation Fields · Palace</title><meta name="title" content="Dipole Antenna and Radiation Fields · Palace"/><meta property="og:title" content="Dipole Antenna and Radiation Fields · Palace"/><meta property="twitter:title" content="Dipole Antenna and Radiation Fields · Palace"/><meta name="description" content="Documentation for Palace."/><meta property="og:description" content="Documentation for Palace."/><meta property="twitter:description" content="Documentation for Palace."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.png" alt="Palace logo"/><img class="docs-dark-only" src="../../assets/logo-dark.png" alt="Palace logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../quick/">Quick Start</a></li><li><a class="tocitem" href="../../install/">Installation</a></li><li><a class="tocitem" href="../../run/">Running <em>Palace</em></a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../guide/guide/">Overview</a></li><li><a class="tocitem" href="../../guide/problem/">Problem Types</a></li><li><a class="tocitem" href="../../guide/model/">Simulation Models</a></li><li><a class="tocitem" href="../../guide/boundaries/">Boundary Conditions</a></li><li><a class="tocitem" href="../../guide/postprocessing/">Postprocessing and Visualization</a></li><li><a class="tocitem" href="../../guide/parallelism/">Parallelism and GPU Support</a></li></ul></li><li><span class="tocitem">Configuration File</span><ul><li><a class="tocitem" href="../../config/config/">Overview</a></li><li><a class="tocitem" href="../../config/problem/"><code>config[&quot;Problem&quot;]</code></a></li><li><a class="tocitem" href="../../config/model/"><code>config[&quot;Model&quot;]</code></a></li><li><a class="tocitem" href="../../config/domains/"><code>config[&quot;Domains&quot;]</code></a></li><li><a class="tocitem" href="../../config/boundaries/"><code>config[&quot;Boundaries&quot;]</code></a></li><li><a class="tocitem" href="../../config/solver/"><code>config[&quot;Solver&quot;]</code></a></li></ul></li><li><span class="tocitem">Features</span><ul><li><a class="tocitem" href="../../features/farfield/">Extracting Fields in the Radiation Zone</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/">Overview</a></li><li><a class="tocitem" href="../spheres/">Capacitance Matrix for Two Spheres</a></li><li><a class="tocitem" href="../rings/">Inductance Matrix for a Pair of Concentric Rings</a></li><li class="is-active"><a class="tocitem" href>Dipole Antenna and Radiation Fields</a><ul class="internal"><li><a class="tocitem" href="#Problem-Setup"><span>Problem Setup</span></a></li><li><a class="tocitem" href="#Configuration-File"><span>Configuration File</span></a></li><li><a class="tocitem" href="#Analysis-and-Results"><span>Analysis and Results</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li><li><a class="tocitem" href="../cylinder/">Eigenmodes of a Cylinder</a></li><li><a class="tocitem" href="../coaxial/">Signal Propagation in a Coaxial Cable</a></li><li><a class="tocitem" href="../cpw/">Crosstalk Between Coplanar Waveguides</a></li></ul></li><li><span class="tocitem">For Developers</span><ul><li><a class="tocitem" href="../../developer/notes/">Developer Notes</a></li><li><a class="tocitem" href="../../developer/testing/">Testing</a></li><li><a class="tocitem" href="../../developer/tutorial_add_new_unit_test/">Tutorial: Adding a New Unit Test</a></li><li><a class="tocitem" href="../../developer/tutorial_gpu_profiling/">Tutorial: GPU Profiling with NVIDIA Nsight Systems and NVTX</a></li></ul></li><li><a class="tocitem" href="../../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Dipole Antenna and Radiation Fields</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Dipole Antenna and Radiation Fields</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/awslabs/palace" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/awslabs/palace/blob/main/docs/src/examples/antenna.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><!--- Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved. --->
<!--- SPDX-License-Identifier: Apache-2.0 ---><h1 id="Dipole-Antenna-and-Radiation-Fields"><a class="docs-heading-anchor" href="#Dipole-Antenna-and-Radiation-Fields">Dipole Antenna and Radiation Fields</a><a id="Dipole-Antenna-and-Radiation-Fields-1"></a><a class="docs-heading-anchor-permalink" href="#Dipole-Antenna-and-Radiation-Fields" title="Permalink"></a></h1><div class="admonition is-info" id="Note-370fe326f1500921"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-370fe326f1500921" title="Permalink"></a></header><div class="admonition-body"><p>The files for this example can be found in the <a href="https://github.com/awslabs/palace/blob/main/examples/antenna"><code>examples/antenna/</code></a> directory of the <em>Palace</em> source code. In this example, we increased the number of sampling points from 100 to 86400.</p></div></div><p>In this example, we study a half-wave dipole antenna and analyze its radiation characteristics. The dipole antenna is one of the most fundamental antenna types, consisting of two conducting elements of length <span>$L$</span> fed at the center by a sinusoidal excitation.</p><p>For an infinitely thin half-wave dipole, the problem can be solved analytically and the solution serves as our reference for validation <a href="#References">[1]</a>. In the wave-zone, the operating wavelength in free space <span>$\lambda$</span> is twice the total length of the antenna (<span>$\lambda = 2 \times 2L = 4L$</span>). The normalized field pattern on the E-plane (xz-plane) is given by</p><p class="math-container">\[E(\theta) = \left|\frac{\cos\left(\frac{\pi}{2}\cos\theta\right)}{\sin\theta}\right|\,,\]</p><p>while the pattern is isotropic on the H-plane (xy-plane).</p><p>We will model a dipole antenna with arm length <span>$L$</span> and finite radius <span>$a$</span>, solve a driven problem at the resonant frequency <span>$\lambda = 4L$</span> and extract the radiation pattern <span>$P(\theta)$</span> with <em>Palace</em>&#39;s <a href="../../features/farfield/#Extracting-Fields-in-the-Radiation-Zone">far-field extraction capabilities</a>).</p><h2 id="Problem-Setup"><a class="docs-heading-anchor" href="#Problem-Setup">Problem Setup</a><a id="Problem-Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-Setup" title="Permalink"></a></h2><p>The dipole is modeled as two thin infinitely conductive cylindrical wires with length <span>$L = 1\text{ m}$</span> and radius <span>$a = L/20 = 5\text{ cm}$</span>, separated by a thin cylindrical gap of height <span>$h = L/100 = 1\text{ cm}$</span>. Given these geometrical characteristics, the operating wavelength is approximately <span>$\lambda = 4\text{ m}$</span>, corresponding to a frequency of <span>$\nu = c / \lambda = 0.0749\text{ GHz}$</span>.</p><p>The gap serves as the excitation point for the antenna. Rather than explicitly modeling the feeding circuit, we place a flat rectangular strip on the xz-plane that connects the two arms of the antenna. This strip functions as a lumped port to excite the system.</p><p>The surrounding medium is free space. In reality, electromagnetic waves would propagate freely to infinity. We model this by enclosing the antenna in a sphere of radius <span>$r_{max} = 1.5\lambda = 6\text{ m}$</span> centered at the origin and applying appropriate boundary conditions to simulate the infinite domain.</p><p>The mesh is generated using <a href="https://gmsh.info"><code>Gmsh</code></a> and consists of tetrahedral elements with appropriate refinement near the antenna structure. The element size increases with distance from the antenna, but is capped to ensure the wavelength is resolved by at least a few elements per wavelength. The mesh file is <a href="https://github.com/awslabs/palace/blob/main/examples/antenna/mesh/antenna.msh"><code>mesh/antenna.msh</code></a> and is generated using the Julia script <a href="https://github.com/awslabs/palace/blob/main/examples/antenna/mesh/mesh.jl"><code>mesh/mesh.jl</code></a>.</p><p>A visualization of the model and the resulting mesh is shown below.</p><br/><p align="center">
  <img src="../../assets/examples/antenna-1.png" width="45%" />
  <img src="../../assets/examples/antenna-2.png" width="45%" />
</p><br/><p>The left image shows the outer domain and the inner antenna structure. The right image provides a close-up view of the gap region, where the rectangular port is aligned on the xz-plane and spans the diameter of the cylindrical conductors.</p><h2 id="Configuration-File"><a class="docs-heading-anchor" href="#Configuration-File">Configuration File</a><a id="Configuration-File-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration-File" title="Permalink"></a></h2><p>The configuration file for the <em>Palace</em> simulation is found in <a href="https://github.com/awslabs/palace/blob/main/examples/antenna/antenna.json"><code>antenna.json</code></a>. The simulation is performed in the frequency domain using the <code>&quot;Driven&quot;</code> solver type, operating at a single frequency of <span>$0.0749\text{ GHz}$</span>.</p><p>Since we assume the metallic rods are perfect conductors, we impose perfect electric conductor (PEC) boundary conditions on their surfaces. To prevent reflections of electromagnetic waves back into the computational domain, we apply <code>&quot;Absorbing&quot;</code> boundary conditions on the outer spherical boundary.</p><p>The antenna is driven using the rectangular strip as a lumped port. This port lies entirely in the xz-plane, and by setting <code>&quot;Direction&quot;: &quot;+Z&quot;</code> and <code>&quot;Excitation&quot;: true</code>, we impose an electric field aligned in the z-direction across the gap.</p><p>We use the <a href="../../features/farfield/#Extracting-Fields-in-the-Radiation-Zone">far-field extraction feature</a> in <em>Palace</em> to extract electric fields at infinity. To do so, we add a <code>&quot;PostProcessing&quot;</code> section under <code>&quot;Boundaries&quot;</code> with the same <code>Attributes</code> as the surface with <code>&quot;Absorbing&quot;</code> boundary conditions and we choose a positive value for <code>&quot;NSample&quot;</code>. A <code>NSample</code> of <code>64800</code> means that the far-field sphere is uniformly discretized with resolution of one degree on the equator (to preserve the uniform distribution, the resolution changes as one moves towards the poles).</p><div class="admonition is-success" id="ComplexCoarseSolve-solver-optimization-4143419e3bcfbb96"><header class="admonition-header">ComplexCoarseSolve solver optimization<a class="admonition-anchor" href="#ComplexCoarseSolve-solver-optimization-4143419e3bcfbb96" title="Permalink"></a></header><div class="admonition-body"><p>This simulation benefits from the <code>&quot;ComplexCoarseSolve&quot;</code> option. This setting uses a complex preconditioner of the form <code>P = [Ar, -Ai; Ai, Ar]</code> rather than the default <code>P = Ar + Ai</code>, where <code>A</code> is the true system matrix with real and imaginary  parts <code>Ar</code> and <code>Ai</code>. While the resulting system is four times larger, it preserves the coupling between real and imaginary parts which can be significant for problems with strong imaginary components. For this particular problem, this approach accelerates convergence by several factors, though at the cost of increased memory usage.</p></div></div><h2 id="Analysis-and-Results"><a class="docs-heading-anchor" href="#Analysis-and-Results">Analysis and Results</a><a id="Analysis-and-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Analysis-and-Results" title="Permalink"></a></h2><p>The simulation requires approximately 6 GBs of RAM and completes in a few minutes (depending on the hardware). The simulation produces a 160 MB <code>postpro</code> folder, which contains the electromagnetic fields that we will use to extract radiation patterns.</p><p>First, let us look at the far-field output. The <code>postpro</code> folder contains a file, <code>farfield-rE.csv</code>, with the far-field electric fields for the all the target frequencies (in this case, only <code>7.49000000e-02</code> GHz). The first few lines of this file are:</p><pre class="documenter-example-output"><code class="nohighlight hljs ansi">        f (GHz),               theta (deg.),                 phi (deg.),              r*Re{E_x} (V),              r*Im{E_x} (V),              r*Re{E_y} (V),              r*Im{E_y} (V),              r*Re{E_z} (V),              r*Im{E_z} (V)
 7.49000000e-02,         0.000000000000e+00,         0.000000000000e+00,        +1.030863711196e-03,        +4.419657726714e-04,        +2.360040259865e-03,        -1.471646095969e-04,        -0.000000000000e+00,        +0.000000000000e+00
 7.49000000e-02,         3.500000000000e+01,         2.000000000000e+01,        -4.976109084061e-02,        -5.813094344751e-02,        -1.542477423828e-02,        -2.055767237953e-02,        +3.643579875144e-02,        +4.317224570532e-02
 7.49000000e-02,         3.686989764584e+01,         0.000000000000e+00,        -5.215445130827e-02,        -5.908140246381e-02,        -3.765440444283e-04,        -8.114820855667e-04,        +3.911583848120e-02,        +4.431105184786e-02</code></pre><p>The <code>plot_farfield.jl</code> Julia script processes this file and produces plots polar for the E- and H- planes (xz/xy-planes) and in the 3D.</p><pre><code class="language-bash hljs">julia --project plot_radiation_pattern.jl postpro/farfield-rE.csv</code></pre><p>The results for the polar plot are shown below.</p><br/><p align="center">
  <img src="../../assets/examples/antenna-3.png" width="100%" />
</p><br/><p>On the H-plane, we see the expected isotropic emission pattern for any of the extracted radii. On the E-plane, we see agreement with the characteristic figure-eight pattern of a dipole antenna, with maximum radiation perpendicular to the antenna axis and nulls approximately along the antenna axis.</p><div class="admonition is-info" id="Do-your-results-look-different?-202757e705df201b"><header class="admonition-header">Do your results look different?<a class="admonition-anchor" href="#Do-your-results-look-different?-202757e705df201b" title="Permalink"></a></header><div class="admonition-body"><p>If you are trying to reproduce this plot, but find that your plots are not as nice as the one above, you might have a missed a note at the top of this page: the example was run with 64800 sampling points instead of the 100 that the JSON file specifies. Change <code>NSample</code> to 64800 and run your simulation again.</p></div></div><p>We can see the same pattern rendered in 3D as well</p><br/><p align="center">
  <img src="../../assets/examples/antenna-4.png" width="80%" />
</p><br/><p>This plot shows the 3D relative antenna pattern representing the normalized strength of the electric field as function of the distance from the origin. Once again, we see the expected donut shape, with maximal electric field strength on the equator, and minimum along the z axis.</p><div class="admonition is-info" id="Running-the-Julia-script-7b65ef03627f3614"><header class="admonition-header">Running the Julia script<a class="admonition-anchor" href="#Running-the-Julia-script-7b65ef03627f3614" title="Permalink"></a></header><div class="admonition-body"><p>The <code>plot_radiation_pattern.jl</code> requires a number of Julia packages (including the plotting library). The simplest way to ensure that you have all the required packages is to use the <code>Project.toml</code> included with the examples. To install this environment, navigate to the <code>examples</code> folder and run</p><pre><code class="language-bash hljs">julia --project -e &#39;using Pkg; Pkg.instantiate();&#39;</code></pre><p>All the subsequent times, just make sure to start Julia with <code>--project</code> from the <code>examples</code></p><p>folder or one of its subfolders.</p></div></div><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><p>[1] Stutzman, W. L., &amp; Thiele, G. A., <em>Antenna Theory and Design</em> (3rd ed.), John Wiley &amp; Sons, 2012.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../rings/">« Inductance Matrix for a Pair of Concentric Rings</a><a class="docs-footer-nextpage" href="../cylinder/">Eigenmodes of a Cylinder »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Thursday 30 October 2025 20:46">Thursday 30 October 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Configuration File Schema",
  "description": "Palace configuration file schema for 3D electromagnetic simulations.",
  "type": "object",
  "additionalProperties": false,
  "required": ["Problem", "Model", "Domains", "Boundaries", "Solver"],
  "properties":
  {
    "Problem": { "$ref": "./config/problem.json" },
    "Model": { "$ref": "./config/model.json" },
    "Domains": { "$ref": "./config/domains.json" },
    "Boundaries": { "$ref": "./config/boundaries.json" },
    "Solver": { "$ref": "./config/solver.json" }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "Problem": {
            "properties": { "Type": { "const": "Driven" } },
            "required": ["Type"]
          }
        }
      },
      "then": {
        "properties": {
          "Solver": { "required": ["Driven"] }
        }
      }
    },
    {
      "if": {
        "properties": {
          "Problem": {
            "properties": { "Type": { "const": "Eigenmode" } },
            "required": ["Type"]
          }
        }
      },
      "then": {
        "properties": {
          "Solver": { "required": ["Eigenmode"] }
        }
      }
    },
    {
      "if": {
        "properties": {
          "Problem": {
            "properties": { "Type": { "const": "Transient" } },
            "required": ["Type"]
          }
        }
      },
      "then": {
        "properties": {
          "Solver": { "required": ["Transient"] }
        }
      }
    }
  ]
}

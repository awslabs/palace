<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Developer Notes · Palace</title><meta name="title" content="Developer Notes · Palace"/><meta property="og:title" content="Developer Notes · Palace"/><meta property="twitter:title" content="Developer Notes · Palace"/><meta name="description" content="Documentation for Palace."/><meta property="og:description" content="Documentation for Palace."/><meta property="twitter:description" content="Documentation for Palace."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img class="docs-light-only" src="../assets/logo.png" alt="Palace logo"/><img class="docs-dark-only" src="../assets/logo-dark.png" alt="Palace logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../install/">Installation</a></li><li><a class="tocitem" href="../run/">Running <em>Palace</em></a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../guide/guide/">Overview</a></li><li><a class="tocitem" href="../guide/problem/">Problem Types</a></li><li><a class="tocitem" href="../guide/model/">Simulation Models</a></li><li><a class="tocitem" href="../guide/boundaries/">Boundary Conditions</a></li><li><a class="tocitem" href="../guide/postprocessing/">Postprocessing and Visualization</a></li></ul></li><li><span class="tocitem">Configuration File</span><ul><li><a class="tocitem" href="../config/config/">Overview</a></li><li><a class="tocitem" href="../config/problem/"><code>config[&quot;Problem&quot;]</code></a></li><li><a class="tocitem" href="../config/model/"><code>config[&quot;Model&quot;]</code></a></li><li><a class="tocitem" href="../config/domains/"><code>config[&quot;Domains&quot;]</code></a></li><li><a class="tocitem" href="../config/boundaries/"><code>config[&quot;Boundaries&quot;]</code></a></li><li><a class="tocitem" href="../config/solver/"><code>config[&quot;Solver&quot;]</code></a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/examples/">Overview</a></li><li><a class="tocitem" href="../examples/spheres/">Capacitance Matrix for Two Spheres</a></li><li><a class="tocitem" href="../examples/rings/">Inductance Matrix for a Pair of Concentric Rings</a></li><li><a class="tocitem" href="../examples/cavity/">Eigenmodes of a Cylindrical Cavity</a></li><li><a class="tocitem" href="../examples/coaxial/">Signal Propagation in a Coaxial Cable</a></li><li><a class="tocitem" href="../examples/cpw/">Crosstalk Between Coplanar Waveguides</a></li></ul></li><li class="is-active"><a class="tocitem" href>Developer Notes</a><ul class="internal"><li><a class="tocitem" href="#Style-guide"><span>Style guide</span></a></li><li><a class="tocitem" href="#Static-analysis"><span>Static analysis</span></a></li><li><a class="tocitem" href="#JSON-Schema-for-configuration-files"><span>JSON Schema for configuration files</span></a></li><li><a class="tocitem" href="#Timing"><span>Timing</span></a></li><li><a class="tocitem" href="#Changelog"><span>Changelog</span></a></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Developer Notes</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Developer Notes</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/awslabs/palace" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/awslabs/palace/blob/main/docs/src/developer.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><!--- Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved. --->
<!--- SPDX-License-Identifier: Apache-2.0 ---><h1 id="Developer-Notes"><a class="docs-heading-anchor" href="#Developer-Notes">Developer Notes</a><a id="Developer-Notes-1"></a><a class="docs-heading-anchor-permalink" href="#Developer-Notes" title="Permalink"></a></h1><h2 id="Style-guide"><a class="docs-heading-anchor" href="#Style-guide">Style guide</a><a id="Style-guide-1"></a><a class="docs-heading-anchor-permalink" href="#Style-guide" title="Permalink"></a></h2><p>Automated source code formatting is performed using <a href="https://clang.llvm.org/docs/ClangFormat.html"><code>clang-format</code></a>. Run:</p><pre><code class="language-bash hljs">./scripts/format_source</code></pre><p>in the repository root directory to automatically use <code>clang-format</code> to format <code>C++</code> source as well as <a href="https://github.com/domluna/JuliaFormatter.jl"><code>JuliaFormatter.jl</code></a> for Julia and Markdown files. The script can be viewed <a href="https://github.com/awslabs/palace/blob/main/scripts/format_source">in the repository</a>.</p><p>The following conventions also apply:</p><ul><li><code>PascalCase</code> for classes and function names.</li><li>Follow &#39;include what you use&#39; (IWYU), with the include order dictated by the <a href="https://google.github.io/styleguide/cppguide.html#Names_and_Order_of_Includes">Google C++ Style Guide</a>. This order should be automatically enforced by the <code>clang-format</code> <a href="https://github.com/awslabs/palace/blob/main/.clang-format">style file</a>.</li><li>Code comments should be full sentences, with punctuation. At this time, no Doxygen API reference is generated and so comments generally do not need to conform to Doxygen syntax.</li></ul><h2 id="Static-analysis"><a class="docs-heading-anchor" href="#Static-analysis">Static analysis</a><a id="Static-analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Static-analysis" title="Permalink"></a></h2><p>During the <code>cmake</code> configuration step, definining the variables <code>ANALYZE_SOURCES_CLANG_TIDY</code> and <code>ANALYZE_SOURCES_CPPCHECK</code> to <code>ON</code> will turn on static analysis using <a href="https://clang.llvm.org/extra/clang-tidy/"><code>clang-tidy</code></a> and <a href="https://cppcheck.sourceforge.io/"><code>cppcheck</code></a>, respectively, during the build step. This requires the executables to be installed and findable by CMake on your system.</p><h2 id="JSON-Schema-for-configuration-files"><a class="docs-heading-anchor" href="#JSON-Schema-for-configuration-files">JSON Schema for configuration files</a><a id="JSON-Schema-for-configuration-files-1"></a><a class="docs-heading-anchor-permalink" href="#JSON-Schema-for-configuration-files" title="Permalink"></a></h2><p>A JSON format <a href="../config/config/">configuration file</a>, for example named <code>config.json</code>, can be validated against the provided Schema using:</p><pre><code class="language-bash hljs">./scripts/validate_config config.json</code></pre><p><a href="https://github.com/awslabs/palace/blob/main/scripts/validate_config">This script</a> uses Julia&#39;s <a href="https://github.com/fredo-dedup/JSONSchema.jl"><code>JSONSchema.jl</code></a> and the Schema provided in <a href="https://github.com/awslabs/palace/blob/main/scripts/schema"><code>scripts/schema/</code></a> to parse the configuration file and check that the fields are correctly specified. This script and the associated Schema are also installed and can be accessed in <code>&lt;INSTALL_DIR&gt;/bin</code>.</p><h2 id="Timing"><a class="docs-heading-anchor" href="#Timing">Timing</a><a id="Timing-1"></a><a class="docs-heading-anchor-permalink" href="#Timing" title="Permalink"></a></h2><p>Timing facilities are provided by the <code>Timer</code> and <code>BlockTimer</code> classes.</p><p>Creating a block as <code>BlockTimer b(idx)</code> where <code>idx</code> is a category like <code>CONSTRUCT</code>, <code>SOLVE</code>, etc. will record time so long as <code>b</code> is in scope; however, timing may be interrupted by creation of another <code>BlockTimer</code> object. It will resume whenever the new block is destroyed. Only one category is timed at once. This enables functions can declare how calls within them are timed without needing to know how timing may be done by the calling function.</p><p>The <code>BlockTimer</code> implementation relies upon a static member object of the <code>Timer</code> class, which behaves as a stopwatch with some memory functions. It is the responsibility of this <code>BlockTimer::timer</code> object to record time spent in each recorded category. Other <code>Timer</code> objects may be created for local timing purposes, but these will not count toward time reported at the end of a log file or in the metadata JSON.</p><h2 id="Changelog"><a class="docs-heading-anchor" href="#Changelog">Changelog</a><a id="Changelog-1"></a><a class="docs-heading-anchor-permalink" href="#Changelog" title="Permalink"></a></h2><p>Code contributions should generally be accompanied by an entry in the <a href="https://github.com/awslabs/palace/blob/main/CHANGELOG.md">changelog</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/cpw/">« Crosstalk Between Coplanar Waveguides</a><a class="docs-footer-nextpage" href="../reference/">Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.0.1 on <span class="colophon-date" title="Tuesday 26 September 2023 15:53">Tuesday 26 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

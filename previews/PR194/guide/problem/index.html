<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Problem Types · Palace</title><meta name="title" content="Problem Types · Palace"/><meta property="og:title" content="Problem Types · Palace"/><meta property="twitter:title" content="Problem Types · Palace"/><meta name="description" content="Documentation for Palace."/><meta property="og:description" content="Documentation for Palace."/><meta property="twitter:description" content="Documentation for Palace."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.png" alt="Palace logo"/><img class="docs-dark-only" src="../../assets/logo-dark.png" alt="Palace logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../install/">Installation</a></li><li><a class="tocitem" href="../../run/">Running <em>Palace</em></a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../guide/">Overview</a></li><li class="is-active"><a class="tocitem" href>Problem Types</a><ul class="internal"><li><a class="tocitem" href="#Eigenmode-problems"><span>Eigenmode problems</span></a></li><li><a class="tocitem" href="#Driven-problems-in-the-frequency-domain"><span>Driven problems in the frequency domain</span></a></li><li><a class="tocitem" href="#Driven-problems-in-the-time-domain"><span>Driven problems in the time domain</span></a></li><li><a class="tocitem" href="#Electrostatic-problems"><span>Electrostatic problems</span></a></li><li><a class="tocitem" href="#Magnetostatic-problems"><span>Magnetostatic problems</span></a></li></ul></li><li><a class="tocitem" href="../model/">Simulation Models</a></li><li><a class="tocitem" href="../boundaries/">Boundary Conditions</a></li><li><a class="tocitem" href="../postprocessing/">Postprocessing and Visualization</a></li><li><a class="tocitem" href="../parallelism/">Parallelism and GPU Support</a></li></ul></li><li><span class="tocitem">Configuration File</span><ul><li><a class="tocitem" href="../../config/config/">Overview</a></li><li><a class="tocitem" href="../../config/problem/"><code>config[&quot;Problem&quot;]</code></a></li><li><a class="tocitem" href="../../config/model/"><code>config[&quot;Model&quot;]</code></a></li><li><a class="tocitem" href="../../config/domains/"><code>config[&quot;Domains&quot;]</code></a></li><li><a class="tocitem" href="../../config/boundaries/"><code>config[&quot;Boundaries&quot;]</code></a></li><li><a class="tocitem" href="../../config/solver/"><code>config[&quot;Solver&quot;]</code></a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/examples/">Overview</a></li><li><a class="tocitem" href="../../examples/spheres/">Capacitance Matrix for Two Spheres</a></li><li><a class="tocitem" href="../../examples/rings/">Inductance Matrix for a Pair of Concentric Rings</a></li><li><a class="tocitem" href="../../examples/cavity/">Eigenmodes of a Cylindrical Cavity</a></li><li><a class="tocitem" href="../../examples/coaxial/">Signal Propagation in a Coaxial Cable</a></li><li><a class="tocitem" href="../../examples/cpw/">Crosstalk Between Coplanar Waveguides</a></li></ul></li><li><a class="tocitem" href="../../developer/">Developer Notes</a></li><li><a class="tocitem" href="../../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>Problem Types</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Problem Types</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/awslabs/palace" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/awslabs/palace/blob/main/docs/src/guide/problem.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><!--- Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved. --->
<!--- SPDX-License-Identifier: Apache-2.0 ---><h1 id="Problem-Types"><a class="docs-heading-anchor" href="#Problem-Types">Problem Types</a><a id="Problem-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-Types" title="Permalink"></a></h1><h2 id="Eigenmode-problems"><a class="docs-heading-anchor" href="#Eigenmode-problems">Eigenmode problems</a><a id="Eigenmode-problems-1"></a><a class="docs-heading-anchor-permalink" href="#Eigenmode-problems" title="Permalink"></a></h2><p>For eigenmode simulations, <a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Type&quot;]: &quot;Eigenmode&quot;</code></a>, the user should specify a nonzero (but arbitrarily small) frequency above which to search for eigenmodes. The computed eigenvalues are written to an ASCII file named <code>eig.csv</code>, in the directory specified by <a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Output&quot;]</code></a>. Also in this file are the mode quality factors and errors (absolute and backward) computed for each eigenpair.</p><p>Calculations related to <a href="https://www.nature.com/articles/s41534-021-00461-8">energy-participation ratio (EPR) quantization</a> can be performed with <em>Palace</em> when the user specifies lumped ports corresponding to the linearized lumped circuit elements in the model. In this case, the participation matrix for inductive elements is automatically generated for the specified number of modes and number of inductive lumped ports. The participation matrix is output in an ASCII file named <code>port-EPR.csv</code>.</p><p>The EPR framework can be used to characterize the dissipative elements in the model as well. In particular, lumped ports with nonzero resistance in the model will trigger coupling rate and quality factor calculations based on input-output (I-O) line coupling loss: By specifying resistive lumped ports in the model, the mode coupling quality factors will be computed as <span>$Q_{ml} = \omega_m/\kappa_{ml}$</span>. The output file <code>port-Q.csv</code> will be created in the output directory containing these mode qualty factor contributions. For bulk and interface dielectric loss calculations, which are not unique to the eigenmode simulation type, see the sections <a href="../postprocessing/#Domain-postprocessing">Domain postprocessing</a> and <a href="../postprocessing/#Boundary-postprocessing">Boundary postprocessing</a> of this guide.</p><h2 id="Driven-problems-in-the-frequency-domain"><a class="docs-heading-anchor" href="#Driven-problems-in-the-frequency-domain">Driven problems in the frequency domain</a><a id="Driven-problems-in-the-frequency-domain-1"></a><a class="docs-heading-anchor-permalink" href="#Driven-problems-in-the-frequency-domain" title="Permalink"></a></h2><p>For frequency domain driven simulations, <a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Type&quot;]: &quot;Driven&quot;</code></a>, the model is excited by a time harmonic incident field (port boundary) or surface current. The user can specify a port excitation using <a href="../boundaries/#Lumped-and-wave-port-excitation">lumped ports or numeric wave ports</a>.</p><p>The default frequency sweep behavior for frequency domain driven simulations is to perform a uniform sampling from the minimum to the maximum specified frequency of interest, using the user specified step size. An adaptive fast frequency sweep strategy can also be used, activated by specifying a nonzero value for <code>&quot;AdaptiveTol&quot;</code> under the <a href="../../config/solver/#solver%5B%22Driven%22%5D"><code>config[&quot;Solver&quot;][&quot;Driven&quot;]</code></a> object. In this case, using the high-dimensional model solution computed at a few automatically selected frequency samples, a low-cost model is constructed and used to compute the frequency response over the entire frequency range of interest. The specified error tolerance ensures that the approximate low-cost model is reliably accurate relative to the high-dimensional model within the frequency band of interest. This is particularly useful for fine-resolution sweeps containing many sample points, where it can yield a significant speedup over the default strategy.</p><p>Port scattering parameters, or S-parameters, are postprocessed for the column of the scattering matrix corresponding to the driven port index automatically for this simulation type and stored in an ASCII file named <code>port-S.csv</code>, in the directory specified by <a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Output&quot;]</code></a>. Both the <span>$\text{dB}$</span> magnitude (<span>$20\log_{10}(|S_{ij}|)$</span>) and the phase <span>$\angle(S_{ij})$</span> (in degrees) are written to the file. In the case that more than a single lumped or wave port is excited or surface current excitations are used, scattering parameter output will be disabled for the simulation(though other quantities of interest are still postprocessed). When lumped ports are present, the peak complex lumped port voltages and currents computed for each excitation frequency are written to ASCII files named <code>port-V.csv</code> and <code>port-I.csv</code>, respectively, Additionally, the surface current excitations are written to <code>surface-I.csv</code>.</p><p>It is often the case that a user wants to compute the entire scattering matrix rather than just a single column. In this case, each column can be computed in parallel by running <em>Palace</em> multiple times. For example, consider the following short Python code which modifies a base configuration file <code>config.json</code> to generate a complete 4x4 scattering matrix by running 4 <em>Palace</em> simulations, each with 2 MPI processes:</p><pre><code class="language-python hljs">import json
import os
import subprocess

# Base configuration file
config_path = &quot;config.json&quot;

for i in range(4):
    # Prepare configuration file for simulation
    with open(config_path, &quot;r&quot;) as f:
        config_json = json.loads(f.read())
    for port in config_json[&quot;Boundaries&quot;][&quot;LumpedPort&quot;]:
        port[&quot;Excitation&quot;] = (1+i == port[&quot;Index&quot;])

    # Write new config file
    config_path_i = os.path.splitext(config_path)[0] + f&quot;-{1+i}.json&quot;
    with open(config_path_i, &quot;w&quot;) as f:
        f.write(json.dumps(config_json))

    # Run Palace simulation (alternatively, use Popen and wait)
    subprocess.run([&quot;palace&quot;, &quot;-np&quot;, 2, config_path_i])</code></pre><h2 id="Driven-problems-in-the-time-domain"><a class="docs-heading-anchor" href="#Driven-problems-in-the-time-domain">Driven problems in the time domain</a><a id="Driven-problems-in-the-time-domain-1"></a><a class="docs-heading-anchor-permalink" href="#Driven-problems-in-the-time-domain" title="Permalink"></a></h2><p>The previous simulation types describe simulations based on frequency domain formulations of Maxwell&#39;s equations. Time domain simulations are also possible through the transient simulation type: <a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Type&quot;]: &quot;Transient&quot;</code></a>.</p><p>Similar to the driven simulation type in the frequency domain, transient simulations involve simulating the response of the system to a time-dependent excitation field specified at lumped ports or surface current excitations in the model. The system is always started from rest with zero initial conditions and time-integrated for a user specified duration, given in nanoseconds. There are several available excitation types which define the time dependence of the pulse or excitation waveform. These are specified under the <a href="../../config/solver/#solver%5B%22Transient%22%5D"><code>config[&quot;Solver&quot;][&quot;Transient&quot;]</code></a> object using the <code>&quot;Excitation&quot;</code> keyword.</p><p>The time histories of the lumped port voltages and currents are postprocessed and automatically written to ASCII files named <code>port-V.csv</code> and <code>port-I.csv</code>, respectively, in the directory specified by <a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Output&quot;]</code></a>. Additionally, surface current excitation time histories are written to <code>surface-I.csv</code>.</p><h2 id="Electrostatic-problems"><a class="docs-heading-anchor" href="#Electrostatic-problems">Electrostatic problems</a><a id="Electrostatic-problems-1"></a><a class="docs-heading-anchor-permalink" href="#Electrostatic-problems" title="Permalink"></a></h2><p>For electrostatic simulations, (<a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Type&quot;]: &quot;Electrostatic&quot;</code></a>, the user should specify a number of terminal boundaries (<a href="../../config/boundaries/#boundaries%5B%22Terminal%22%5D"><code>config[&quot;Boundaries&quot;][&quot;Terminal&quot;]</code></a>) as well as boundaries which are grounded (<a href="../../config/boundaries/#boundaries%5B%22Ground%22%5D"><code>config[&quot;Boundaries&quot;][&quot;Ground&quot;]</code></a>). For each terminal, an electrostatic field is computed by assigning the terminal of interest a positive unit voltage and all other terminals and grounded boundaries a zero voltage. The resulting fields are then used to compute the Maxwell capacitance matrix and its inverse, which are written to an ASCII file named <code>terminal-C.csv</code> and <code>terminal-Cinv.csv</code>, respectively, in the directory specified by <a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Output&quot;]</code></a>. The mutual capacitance matrix is also computed and written to <code>terminal-Cm.csv</code> in the same directory.</p><h2 id="Magnetostatic-problems"><a class="docs-heading-anchor" href="#Magnetostatic-problems">Magnetostatic problems</a><a id="Magnetostatic-problems-1"></a><a class="docs-heading-anchor-permalink" href="#Magnetostatic-problems" title="Permalink"></a></h2><p>For magnetostatic simulations, (<a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Type&quot;]: &quot;Magnetostatic&quot;</code></a>, the user should specify a number of source current boundaries. For each current source, a magnetostatic field is computed by applying a unit current to the source index of interest, leaving all other sources open with no excitation. Surfaces which are expected to carry current should be labeled as perfectly conducting, which prescibes a zero magnetic flux, or <a href="https://doc.comsol.com/5.5/doc/com.comsol.help.comsol/comsol_ref_acdc.17.74.html">magnetic insulation</a>, boundary condition. The resulting fields are used to compute the inductance matrix and its inverse, which are written to an ASCII file named <code>terminal-M.csv</code> and <code>terminal-Minv.csv</code>, respectively, in the directory specified by <a href="../../config/problem/#config%5B%22Problem%22%5D"><code>config[&quot;Problem&quot;][&quot;Output&quot;]</code></a>. A &quot;mutual&quot; inductance matrix which has the same form as the mutual capacitance matrix (its entries are based on current differences between ports rather than absolute currents) is computed and written to <code>terminal-Mm.csv</code> in the same directory.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../guide/">« Overview</a><a class="docs-footer-nextpage" href="../model/">Simulation Models »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 14 March 2024 22:32">Thursday 14 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
